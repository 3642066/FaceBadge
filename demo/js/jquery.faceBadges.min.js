(function($){$.fn.faceBadge=function(options){$.fn.faceBadge.defaults={pageId:null,loaderText:"Loading tweets...",width:500,height:75,textColor:"#999",showDesc:false,linkToPage:false};var o=$.extend({},$.fn.faceBadge.defaults,options);return this.each(function(){var c=$(this);c.hide().empty().addClass("faceBadge");var preLoaderHTML=$('<p class="preLoader">'+o.loaderText+"</p>");c.append(preLoaderHTML);c.css("width",o.width).css("position","relative");c.show();window.jsonTwitterFeed="http://graph.facebook.com/"+
o.pageId;jQuery.getJSON(jsonTwitterFeed,{format:"json"}).done(function(data){c.hide();var fb_count=data["likes"].toString();var fb_about=data["about"].toString().substr(0,100)+" ...";var fb_name=data["name"].toString();var fb_desc="";var fb_about="";var coverBad=data.cover.source;var cover=coverBad.replace("s720x720","s480x480");var desc="";if(data["description"]!==undefined){fb_desc=data["description"].toString().substr(0,70)+" ...";desc=fb_desc}else{fb_desc="No description";if(data["about"]!==undefined){fb_about=
data["about"].toString().substr(0,70)+" ...";desc=fb_about}else fb_about="No description"}fb_count=add_commas(fb_count);c.html('<div class="faceBadge-cover"></div>');var fbcover=$(".faceBadge-cover");if(o.showDesc)fbcover.append('<div class="faceBadge-desc">'+desc+"</div>");fbcover.append('<img style="margin-left: -110px" src="'+cover+'" />');c.append('<div id="faceBadge" class="faceBadge-page-data"></div>');var fbdata=$(".faceBadge-page-data");fbdata.append('<div class="FaceBadge-image"><a href="#"><img src="http://res.cloudinary.com/demo/image/facebook/w_100,h_100,c_fill/'+
o.pageId+'.jpg" width="100" height="100"/></a></div>');fbdata.append('<div class="faceBadge-content"><div class="faceBadge-name">'+fb_name+"</div></div>");fbdata.append('<div class="faceBadge-like-count"></div>');$(".faceBadge-like-count").append('<iframe src="//www.facebook.com/plugins/like.php?href='+encodeURIComponent("http://www.facebook.com/"+o.pageId)+'&amp;width=100px&amp;layout=standard&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=35&amp;appId=442899805810904" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:50px; height:35px; float:left" allowTransparency="true" id="face"></iframe>');
$(".faceBadge-like-count").append('<span style="color:'+o.textColor+'; text-shadow:none">'+fb_count+"</span>");c.fadeIn()});function add_commas(number){if(number.length>3){var mod=number.length%3;var output=mod>0?number.substring(0,mod):"";for(i=0;i<Math.floor(number.length/3);i++)if(mod===0&&i===0)output+=number.substring(mod+3*i,mod+3*i+3);else output+=","+number.substring(mod+3*i,mod+3*i+3);return output}else return number}})}})(jQuery);
